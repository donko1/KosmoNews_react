{"ast":null,"code":"import Layout from\"./Layout\";import{useState,useEffect}from\"react\";import CroppedImage from\"./Img\";import{useParams}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const Index=props=>{const{word}=useParams();if(props.url===\"search\"){var url=\"search/\".concat(word);}else{var url=\"\".concat(props.url,\"/\");}const[themes,setThemes]=useState([]);const[news,setNews]=useState([]);useEffect(()=>{fetch(\"/api/themes/\")// fetch(\"http://localhost:8000/api/themes/\")\n.then(response=>response.json()).then(async data=>{setThemes(data);const response=await fetch(\"/api/\".concat(url));// const response = await fetch(`http://localhost:8000/api/${url}`);\nconst data_1=await response.json();setNews(data_1);});},[props.url]);const themeList=Object.values(themes);return/*#__PURE__*/_jsx(Layout,{themes:themeList,children:news.map((item,number)=>{let img=item.image;let months=[\"января\",\"февраля\",\"марта\",\"апреля\",\"мая\",\"июня\",\"июля\",\"августа\",\"сентября\",\"октября\",\"ноября\",\"декабря\"];let today=new Date(item.date);let day=today.getDate();let month=months[today.getMonth()];let year=today.getFullYear();let minutes=today.getMinutes();let hours=today.getHours();const intMinutes=parseInt(minutes,10);const formattedMinutes=intMinutes<10?\"0\".concat(intMinutes):intMinutes;let formattedDate=\"\".concat(hours,\":\").concat(formattedMinutes);return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"a\",{href:\"/\"+item.id,children:[/*#__PURE__*/_jsx(\"h1\",{children:item.title}),/*#__PURE__*/_jsx(\"h2\",{children:formattedDate}),/*#__PURE__*/_jsx(CroppedImage,{src:img,width:400,height:400})]},number)});})});};export default Index;","map":{"version":3,"names":["Layout","useState","useEffect","CroppedImage","useParams","jsx","_jsx","jsxs","_jsxs","Index","props","word","url","concat","themes","setThemes","news","setNews","fetch","then","response","json","data","data_1","themeList","Object","values","children","map","item","number","img","image","months","today","Date","date","day","getDate","month","getMonth","year","getFullYear","minutes","getMinutes","hours","getHours","intMinutes","parseInt","formattedMinutes","formattedDate","href","id","title","src","width","height"],"sources":["/home/donkol/Документы/Программирование/программы на python/djanga/KosmoNews/kosmonews_react/src/Main.js"],"sourcesContent":["import Layout from \"./Layout\";\nimport { useState, useEffect } from \"react\";\nimport CroppedImage from \"./Img\";\nimport { useParams } from \"react-router-dom\";\n\nconst Index = (props) => {\n  const { word } = useParams();\n  if (props.url === \"search\") {\n    var url = `search/${word}`;\n  } else {\n    var url = `${props.url}/`;\n  }\n\n  const [themes, setThemes] = useState([]);\n  const [news, setNews] = useState([]);\n  useEffect(() => {\n    fetch(\"/api/themes/\")\n      // fetch(\"http://localhost:8000/api/themes/\")\n      .then((response) => response.json())\n      .then(async (data) => {\n        setThemes(data);\n        const response = await fetch(`/api/${url}`);\n        // const response = await fetch(`http://localhost:8000/api/${url}`);\n        const data_1 = await response.json();\n        setNews(data_1);\n      });\n  }, [props.url]);\n  const themeList = Object.values(themes);\n\n  return (\n    <Layout themes={themeList}>\n      {news.map((item, number) => {\n        let img = item.image;\n        let months = [\n          \"января\",\n          \"февраля\",\n          \"марта\",\n          \"апреля\",\n          \"мая\",\n          \"июня\",\n          \"июля\",\n          \"августа\",\n          \"сентября\",\n          \"октября\",\n          \"ноября\",\n          \"декабря\",\n        ];\n\n        let today = new Date(item.date);\n        let day = today.getDate();\n        let month = months[today.getMonth()];\n        let year = today.getFullYear();\n        let minutes = today.getMinutes();\n        let hours = today.getHours();\n        const intMinutes = parseInt(minutes, 10);\n        const formattedMinutes =\n          intMinutes < 10 ? `0${intMinutes}` : intMinutes;\n\n        let formattedDate = `${hours}:${formattedMinutes}`;\n        return (\n          <div>\n            <a key={number} href={\"/\" + item.id}>\n              <h1>{item.title}</h1>\n              <h2>{formattedDate}</h2>\n              <CroppedImage src={img} width={400} height={400} />\n            </a>\n          </div>\n        );\n      })}\n    </Layout>\n  );\n};\n\nexport default Index;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}