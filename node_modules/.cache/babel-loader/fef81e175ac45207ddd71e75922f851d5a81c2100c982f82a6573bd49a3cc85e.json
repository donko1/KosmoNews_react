{"ast":null,"code":"import Layout from\"./Layout\";import React,{useState,useEffect}from\"react\";import{useParams}from\"react-router-dom\";import CroppedImage from\"./Img\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const Detail=()=>{const{arg}=useParams();const[news,setNews]=useState({});const[themes,setThemes]=useState([]);useEffect(()=>{// fetch(\"/api/themes/\")\nfetch(\"http://localhost:8000/api/themes\").then(response=>response.json()).then(async data=>{setThemes(data);// const response = await fetch(`/api/${arg}/`);\nconst response=await fetch(\"http://localhost:8000/api/\".concat(arg,\"/\"));const data_1=await response.json();setNews(data_1);});},[arg]);// Форматирование даты\nconst formatDate=date=>{let months=[\"января\",\"февраля\",\"марта\",\"апреля\",\"мая\",\"июня\",\"июля\",\"августа\",\"сентября\",\"октября\",\"ноября\",\"декабря\"];let today=new Date(date);let day=today.getDate();let month=months[today.getMonth()];let year=today.getFullYear();let minutes=today.getMinutes();let hours=today.getHours();const intMinutes=parseInt(minutes,10);const formattedMinutes=intMinutes<10?\"0\".concat(intMinutes):intMinutes;return\"\".concat(hours,\":\").concat(formattedMinutes,\". \").concat(day,\" \").concat(month);};const themeList=Object.values(themes);const formattedDate=formatDate(news.date);let img=news.image;return/*#__PURE__*/_jsx(Layout,{themes:themeList,children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:news.title}),/*#__PURE__*/_jsx(CroppedImage,{src:img,height:1000,width:1000}),/*#__PURE__*/_jsx(\"h3\",{children:themes[news.theme]}),/*#__PURE__*/_jsx(\"h4\",{children:formattedDate}),/*#__PURE__*/_jsx(\"h2\",{children:news.article_text})]})});};export default Detail;","map":{"version":3,"names":["Layout","React","useState","useEffect","useParams","CroppedImage","jsx","_jsx","jsxs","_jsxs","Detail","arg","news","setNews","themes","setThemes","fetch","then","response","json","data","concat","data_1","formatDate","date","months","today","Date","day","getDate","month","getMonth","year","getFullYear","minutes","getMinutes","hours","getHours","intMinutes","parseInt","formattedMinutes","themeList","Object","values","formattedDate","img","image","children","title","src","height","width","theme","article_text"],"sources":["/home/donkol/Документы/Программирование/программы на python/djanga/KosmoNews/kosmonews_react/src/Detail.js"],"sourcesContent":["import Layout from \"./Layout\";\nimport React, { useState, useEffect } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport CroppedImage from \"./Img\";\n\nconst Detail = () => {\n  const { arg } = useParams();\n  const [news, setNews] = useState({});\n  const [themes, setThemes] = useState([]);\n  useEffect(() => {\n    // fetch(\"/api/themes/\")\n    fetch(\"http://localhost:8000/api/themes\")\n      .then((response) => response.json())\n      .then(async (data) => {\n        setThemes(data);\n        // const response = await fetch(`/api/${arg}/`);\n        const response = await fetch(`http://localhost:8000/api/${arg}/`);\n        const data_1 = await response.json();\n        setNews(data_1);\n      });\n  }, [arg]);\n\n  // Форматирование даты\n  const formatDate = (date) => {\n    let months = [\n      \"января\",\n      \"февраля\",\n      \"марта\",\n      \"апреля\",\n      \"мая\",\n      \"июня\",\n      \"июля\",\n      \"августа\",\n      \"сентября\",\n      \"октября\",\n      \"ноября\",\n      \"декабря\",\n    ];\n\n    let today = new Date(date);\n    let day = today.getDate();\n    let month = months[today.getMonth()];\n    let year = today.getFullYear();\n    let minutes = today.getMinutes();\n    let hours = today.getHours();\n    const intMinutes = parseInt(minutes, 10);\n    const formattedMinutes = intMinutes < 10 ? `0${intMinutes}` : intMinutes;\n\n    return `${hours}:${formattedMinutes}. ${day} ${month}`;\n  };\n\n  const themeList = Object.values(themes);\n  const formattedDate = formatDate(news.date);\n  let img = news.image;\n  return (\n    <Layout themes={themeList}>\n      <div>\n        <h1>{news.title}</h1>\n        <CroppedImage src={img} height={1000} width={1000} />\n        <h3>{themes[news.theme]}</h3>\n        <h4>{formattedDate}</h4>\n        <h2>{news.article_text}</h2>\n      </div>\n    </Layout>\n  );\n};\n\nexport default Detail;\n"],"mappings":"AAAA,MAAO,CAAAA,MAAM,KAAM,UAAU,CAC7B,MAAO,CAAAC,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,OAASC,SAAS,KAAQ,kBAAkB,CAC5C,MAAO,CAAAC,YAAY,KAAM,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAEjC,KAAM,CAAAC,MAAM,CAAGA,CAAA,GAAM,CACnB,KAAM,CAAEC,GAAI,CAAC,CAAGP,SAAS,CAAC,CAAC,CAC3B,KAAM,CAACQ,IAAI,CAAEC,OAAO,CAAC,CAAGX,QAAQ,CAAC,CAAC,CAAC,CAAC,CACpC,KAAM,CAACY,MAAM,CAAEC,SAAS,CAAC,CAAGb,QAAQ,CAAC,EAAE,CAAC,CACxCC,SAAS,CAAC,IAAM,CACd;AACAa,KAAK,CAAC,kCAAkC,CAAC,CACtCC,IAAI,CAAEC,QAAQ,EAAKA,QAAQ,CAACC,IAAI,CAAC,CAAC,CAAC,CACnCF,IAAI,CAAC,KAAO,CAAAG,IAAI,EAAK,CACpBL,SAAS,CAACK,IAAI,CAAC,CACf;AACA,KAAM,CAAAF,QAAQ,CAAG,KAAM,CAAAF,KAAK,8BAAAK,MAAA,CAA8BV,GAAG,KAAG,CAAC,CACjE,KAAM,CAAAW,MAAM,CAAG,KAAM,CAAAJ,QAAQ,CAACC,IAAI,CAAC,CAAC,CACpCN,OAAO,CAACS,MAAM,CAAC,CACjB,CAAC,CAAC,CACN,CAAC,CAAE,CAACX,GAAG,CAAC,CAAC,CAET;AACA,KAAM,CAAAY,UAAU,CAAIC,IAAI,EAAK,CAC3B,GAAI,CAAAC,MAAM,CAAG,CACX,QAAQ,CACR,SAAS,CACT,OAAO,CACP,QAAQ,CACR,KAAK,CACL,MAAM,CACN,MAAM,CACN,SAAS,CACT,UAAU,CACV,SAAS,CACT,QAAQ,CACR,SAAS,CACV,CAED,GAAI,CAAAC,KAAK,CAAG,GAAI,CAAAC,IAAI,CAACH,IAAI,CAAC,CAC1B,GAAI,CAAAI,GAAG,CAAGF,KAAK,CAACG,OAAO,CAAC,CAAC,CACzB,GAAI,CAAAC,KAAK,CAAGL,MAAM,CAACC,KAAK,CAACK,QAAQ,CAAC,CAAC,CAAC,CACpC,GAAI,CAAAC,IAAI,CAAGN,KAAK,CAACO,WAAW,CAAC,CAAC,CAC9B,GAAI,CAAAC,OAAO,CAAGR,KAAK,CAACS,UAAU,CAAC,CAAC,CAChC,GAAI,CAAAC,KAAK,CAAGV,KAAK,CAACW,QAAQ,CAAC,CAAC,CAC5B,KAAM,CAAAC,UAAU,CAAGC,QAAQ,CAACL,OAAO,CAAE,EAAE,CAAC,CACxC,KAAM,CAAAM,gBAAgB,CAAGF,UAAU,CAAG,EAAE,KAAAjB,MAAA,CAAOiB,UAAU,EAAKA,UAAU,CAExE,SAAAjB,MAAA,CAAUe,KAAK,MAAAf,MAAA,CAAImB,gBAAgB,OAAAnB,MAAA,CAAKO,GAAG,MAAAP,MAAA,CAAIS,KAAK,EACtD,CAAC,CAED,KAAM,CAAAW,SAAS,CAAGC,MAAM,CAACC,MAAM,CAAC7B,MAAM,CAAC,CACvC,KAAM,CAAA8B,aAAa,CAAGrB,UAAU,CAACX,IAAI,CAACY,IAAI,CAAC,CAC3C,GAAI,CAAAqB,GAAG,CAAGjC,IAAI,CAACkC,KAAK,CACpB,mBACEvC,IAAA,CAACP,MAAM,EAACc,MAAM,CAAE2B,SAAU,CAAAM,QAAA,cACxBtC,KAAA,QAAAsC,QAAA,eACExC,IAAA,OAAAwC,QAAA,CAAKnC,IAAI,CAACoC,KAAK,CAAK,CAAC,cACrBzC,IAAA,CAACF,YAAY,EAAC4C,GAAG,CAAEJ,GAAI,CAACK,MAAM,CAAE,IAAK,CAACC,KAAK,CAAE,IAAK,CAAE,CAAC,cACrD5C,IAAA,OAAAwC,QAAA,CAAKjC,MAAM,CAACF,IAAI,CAACwC,KAAK,CAAC,CAAK,CAAC,cAC7B7C,IAAA,OAAAwC,QAAA,CAAKH,aAAa,CAAK,CAAC,cACxBrC,IAAA,OAAAwC,QAAA,CAAKnC,IAAI,CAACyC,YAAY,CAAK,CAAC,EACzB,CAAC,CACA,CAAC,CAEb,CAAC,CAED,cAAe,CAAA3C,MAAM"},"metadata":{},"sourceType":"module","externalDependencies":[]}