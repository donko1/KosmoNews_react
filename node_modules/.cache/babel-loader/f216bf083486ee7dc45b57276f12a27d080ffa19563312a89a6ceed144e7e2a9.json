{"ast":null,"code":"import Layout from\"./Layout\";import React,{useState,useEffect}from\"react\";import{useParams}from\"react-router-dom\";import CroppedImage from\"./Img\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function countWords(sentence){const words=sentence.split(\" \");return words.length;}function calculateMinutes(sentence){const wordsCount=countWords(sentence);const minutes=Math.ceil(wordsCount/150);if(minutes===1){return\"1 минута\";}else if(minutes>1&&minutes<5){return minutes+\" минуты\";}else{return minutes+\" минут\";}}const Detail=()=>{const{arg}=useParams();const[news,setNews]=useState({});const[themes,setThemes]=useState([]);useEffect(()=>{fetch(\"/api/themes/\")// fetch(\"http://localhost:8000/api/themes\")\n.then(response=>response.json()).then(async data=>{setThemes(data);const response=await fetch(\"/api/\".concat(arg,\"/\"));// const response = await fetch(`http://localhost:8000/api/${arg}/`);\nconst data_1=await response.json();setNews(data_1);});},[arg]);// Форматирование даты\nconst formatDate=date=>{let months=[\"января\",\"февраля\",\"марта\",\"апреля\",\"мая\",\"июня\",\"июля\",\"августа\",\"сентября\",\"октября\",\"ноября\",\"декабря\"];let today=new Date(date);let day=today.getDate();let month=months[today.getMonth()];let year=today.getFullYear();let minutes=today.getMinutes();let hours=today.getHours();const intMinutes=parseInt(minutes,10);const formattedMinutes=intMinutes<10?\"0\".concat(intMinutes):intMinutes;return\"\".concat(hours,\":\").concat(formattedMinutes,\". \").concat(day,\" \").concat(month);};const themeList=Object.values(themes);const formattedDate=formatDate(news.date);let img=news.image;return/*#__PURE__*/_jsx(Layout,{themes:themeList,children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:news.title}),/*#__PURE__*/_jsx(\"h2\",{children:news.article_text?calculateMinutes(news.article_text):\"Расчет времени...\"}),/*#__PURE__*/_jsx(CroppedImage,{src:img,height:1000,width:1000}),/*#__PURE__*/_jsx(\"h3\",{children:themes[news.theme]}),/*#__PURE__*/_jsx(\"h4\",{children:formattedDate}),/*#__PURE__*/_jsx(\"h2\",{children:news.article_text})]})});};export default Detail;","map":{"version":3,"names":["Layout","React","useState","useEffect","useParams","CroppedImage","jsx","_jsx","jsxs","_jsxs","countWords","sentence","words","split","length","calculateMinutes","wordsCount","minutes","Math","ceil","Detail","arg","news","setNews","themes","setThemes","fetch","then","response","json","data","concat","data_1","formatDate","date","months","today","Date","day","getDate","month","getMonth","year","getFullYear","getMinutes","hours","getHours","intMinutes","parseInt","formattedMinutes","themeList","Object","values","formattedDate","img","image","children","title","article_text","src","height","width","theme"],"sources":["/home/donkol/Документы/Программирование/программы на python/djanga/KosmoNews/kosmonews_react/src/Detail.js"],"sourcesContent":["import Layout from \"./Layout\";\nimport React, { useState, useEffect } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport CroppedImage from \"./Img\";\n\nfunction countWords(sentence) {\n  const words = sentence.split(\" \");\n  return words.length;\n}\n\nfunction calculateMinutes(sentence) {\n  const wordsCount = countWords(sentence);\n  const minutes = Math.ceil(wordsCount / 150);\n\n  if (minutes === 1) {\n    return \"1 минута\";\n  } else if (minutes > 1 && minutes < 5) {\n    return minutes + \" минуты\";\n  } else {\n    return minutes + \" минут\";\n  }\n}\n\nconst Detail = () => {\n  const { arg } = useParams();\n  const [news, setNews] = useState({});\n  const [themes, setThemes] = useState([]);\n  useEffect(() => {\n    fetch(\"/api/themes/\")\n      // fetch(\"http://localhost:8000/api/themes\")\n      .then((response) => response.json())\n      .then(async (data) => {\n        setThemes(data);\n        const response = await fetch(`/api/${arg}/`);\n        // const response = await fetch(`http://localhost:8000/api/${arg}/`);\n        const data_1 = await response.json();\n        setNews(data_1);\n      });\n  }, [arg]);\n\n  // Форматирование даты\n  const formatDate = (date) => {\n    let months = [\n      \"января\",\n      \"февраля\",\n      \"марта\",\n      \"апреля\",\n      \"мая\",\n      \"июня\",\n      \"июля\",\n      \"августа\",\n      \"сентября\",\n      \"октября\",\n      \"ноября\",\n      \"декабря\",\n    ];\n\n    let today = new Date(date);\n    let day = today.getDate();\n    let month = months[today.getMonth()];\n    let year = today.getFullYear();\n    let minutes = today.getMinutes();\n    let hours = today.getHours();\n    const intMinutes = parseInt(minutes, 10);\n    const formattedMinutes = intMinutes < 10 ? `0${intMinutes}` : intMinutes;\n\n    return `${hours}:${formattedMinutes}. ${day} ${month}`;\n  };\n\n  const themeList = Object.values(themes);\n  const formattedDate = formatDate(news.date);\n  let img = news.image;\n  return (\n    <Layout themes={themeList}>\n      <div>\n        <h1>{news.title}</h1>\n        <h2>\n          {news.article_text\n            ? calculateMinutes(news.article_text)\n            : \"Расчет времени...\"}\n        </h2>\n        <CroppedImage src={img} height={1000} width={1000} />\n        <h3>{themes[news.theme]}</h3>\n        <h4>{formattedDate}</h4>\n        <h2>{news.article_text}</h2>\n      </div>\n    </Layout>\n  );\n};\n\nexport default Detail;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}