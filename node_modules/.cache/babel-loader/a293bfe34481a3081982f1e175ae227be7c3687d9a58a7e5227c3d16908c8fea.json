{"ast":null,"code":"import Layout from\"./Layout\";import Detail from\"./Detail\";import{BrowserRouter,Routes,Route}from\"react-router-dom\";import{useState,useEffect}from\"react\";import CroppedImage from\"./Img\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const Index=props=>{const[themes,setThemes]=useState([]);const[news,setNews]=useState([]);useEffect(()=>{fetch(\"/api/themes/\").then(response=>response.json()).then(async data=>{setThemes(data);const response=await fetch(\"/api/\".concat(props.url,\"/\"));const data_1=await response.json();setNews(data_1);});},[props.url]);const themeList=Object.values(themes);return/*#__PURE__*/_jsx(Layout,{themes:themeList,children:news.map((item,number)=>{let img=item.image;let months=[\"января\",\"февраля\",\"марта\",\"апреля\",\"мая\",\"июня\",\"июля\",\"августа\",\"сентября\",\"октября\",\"ноября\",\"декабря\"];let today=new Date(item.date);let day=today.getDate();let month=months[today.getMonth()];let year=today.getFullYear();let minutes=today.getMinutes();let hours=today.getHours();let formattedDate=\"\".concat(hours,\":\").concat(minutes);return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"a\",{href:\"/\"+item.id,children:[/*#__PURE__*/_jsx(\"h1\",{children:item.title}),/*#__PURE__*/_jsx(\"h2\",{children:formattedDate}),/*#__PURE__*/_jsx(CroppedImage,{src:img,width:400,height:400})]},number)});})});};const App=()=>{return/*#__PURE__*/_jsx(BrowserRouter,{children:/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"\",element:/*#__PURE__*/_jsx(Index,{url:\"\"})}),/*#__PURE__*/_jsx(Route,{path:\":arg\",element:/*#__PURE__*/_jsx(Detail,{})}),/*#__PURE__*/_jsx(Route,{path:\"theme1\",element:/*#__PURE__*/_jsx(Index,{url:\"politics\"})}),/*#__PURE__*/_jsx(Route,{path:\"theme2\",element:/*#__PURE__*/_jsx(Index,{url:\"region\"})}),/*#__PURE__*/_jsx(Route,{path:\"theme3\",element:/*#__PURE__*/_jsx(Index,{url:\"investments\"})})]})});};export default App;","map":{"version":3,"names":["Layout","Detail","BrowserRouter","Routes","Route","useState","useEffect","CroppedImage","jsx","_jsx","jsxs","_jsxs","Index","props","themes","setThemes","news","setNews","fetch","then","response","json","data","concat","url","data_1","themeList","Object","values","children","map","item","number","img","image","months","today","Date","date","day","getDate","month","getMonth","year","getFullYear","minutes","getMinutes","hours","getHours","formattedDate","href","id","title","src","width","height","App","path","element"],"sources":["/home/donkol/Документы/Программирование/программы на python/djanga/KosmoNews/kosmonews_react/src/App.js"],"sourcesContent":["import Layout from \"./Layout\";\nimport Detail from \"./Detail\";\nimport { BrowserRouter, Routes, Route } from \"react-router-dom\";\nimport { useState, useEffect } from \"react\";\nimport CroppedImage from \"./Img\";\n\nconst Index = (props) => {\n  const [themes, setThemes] = useState([]);\n  const [news, setNews] = useState([]);\n  useEffect(() => {\n    fetch(\"/api/themes/\")\n      .then((response) => response.json())\n      .then(async (data) => {\n        setThemes(data);\n        const response = await fetch(`/api/${props.url}/`);\n        const data_1 = await response.json();\n        setNews(data_1);\n      });\n  }, [props.url]);\n  const themeList = Object.values(themes);\n\n  return (\n    <Layout themes={themeList}>\n      {news.map((item, number) => {\n        let img = item.image;\n        let months = [\n          \"января\",\n          \"февраля\",\n          \"марта\",\n          \"апреля\",\n          \"мая\",\n          \"июня\",\n          \"июля\",\n          \"августа\",\n          \"сентября\",\n          \"октября\",\n          \"ноября\",\n          \"декабря\",\n        ];\n\n        let today = new Date(item.date);\n        let day = today.getDate();\n        let month = months[today.getMonth()];\n        let year = today.getFullYear();\n        let minutes = today.getMinutes();\n        let hours = today.getHours();\n\n        let formattedDate = `${hours}:${minutes}`;\n        return (\n          <div>\n            <a key={number} href={\"/\" + item.id}>\n              <h1>{item.title}</h1>\n              <h2>{formattedDate}</h2>\n              <CroppedImage src={img} width={400} height={400} />\n            </a>\n          </div>\n        );\n      })}\n    </Layout>\n  );\n};\n\nconst App = () => {\n  return (\n    <BrowserRouter>\n      <Routes>\n        <Route path=\"\" element={<Index url=\"\" />} />\n        <Route path=\":arg\" element={<Detail />} />\n        <Route path=\"theme1\" element={<Index url=\"politics\" />} />\n        <Route path=\"theme2\" element={<Index url=\"region\" />} />\n        <Route path=\"theme3\" element={<Index url=\"investments\" />} />\n      </Routes>\n    </BrowserRouter>\n  );\n};\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}